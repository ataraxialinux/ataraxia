# Maintainer: nee-san <nagakamira@gmail.com>

pkgname=btrfs-progs
pkgver=4.20.1
pkgrel=2
pkgdesc='Btrfs filesystem utilities'
arch=('x86_64' 'x86' 'arm64' 'armv7l' 'armv5tel' 'ppc64le' 'ppc64' 'ppc')
url="https://btrfs.wiki.kernel.org"
license=('GPL-2.0-or-later LGPL-3.0-or-later')
depends=('musl' 'util-linux' 'e2fsprogs' 'lzo' 'libz' 'zstd')
options=('!staticlibs')
source=("https://www.kernel.org/pub/linux/kernel/people/kdave/$pkgname/$pkgname-v$pkgver.tar.xz")
md5sums=('9aa0a16236c7087ded08425c7256044f')

build() {
	cd "$srcdir"/$pkgname-v$pkgver
	./configure \
		--prefix='' \
		--disable-backtrace \
		--disable-documentation \
		--build=$CHOST
	make
}

package() {
	cd "$srcdir"/$pkgname-v$pkgver
	make DESTDIR="$pkgdir" install

	install -Dm644 btrfs-completion "$pkgdir"/share/bash-completion/completions/btrfs
}

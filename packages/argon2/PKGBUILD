# Maintainer: nee-san <nagakamira@gmail.com>

pkgname=argon2
pkgver=20171227
pkgrel=1
pkgdesc="The password hash Argon2, winner of PHC"
arch=('x86_64' 'x86' 'arm64' 'armv7l' 'armv5tel' 'ppc64le' 'ppc64' 'ppc')
url="https://github.com/P-H-C/phc-winner-argon2"
license=('Apache-2.0 CC0-1.0')
depends=('musl')
source=("https://github.com/P-H-C/phc-winner-argon2/archive/$pkgver.tar.gz"
	'libargon2.pc')
md5sums=('7d0a85aa3fa02a5962ff751a6e2078c8'
         '57b46295352e5419503a2c98ca936ce3')

prepare() {
	cd "$srcdir"/phc-winner-$pkgname-$pkgver

	cp "$srcdir"/libargon2.pc libargon2.pc
	sed -i -e "s/@UPSTREAM_VER@/${pkgver}/" libargon2.pc
}


build() {
	cd "$srcdir"/phc-winner-$pkgname-$pkgver
	make PREFIX='' OPTTARGET=none
}

package() {
	cd "$srcdir"/phc-winner-$pkgname-$pkgver
	make PREFIX='' OPTTARGET=none DESTDIR="$pkgdir" install
}

# Description: GObject-based multi-platform GUI toolkit
# URL:         https://www.gtk.org/
# Maintainer:  protonesso, nagakamira at gmail dot com
# Depends on:  meson at-spi2-atk fribidi gdk-pixbuf librsvg libepoxy pango hicolor-icon-theme iso-codes libxkbcommon sassc wayland-protocols
# Section:     libs

name=gtk3
version=3.24.12
release=2
source=("http://ftp.gnome.org/pub/gnome/sources/gtk+/${version%.*}/gtk+-$version.tar.xz"
	"gtk3.trigger"
	"icon-cache.trigger"
	"update-icon-cache")

build() {
	cd "$SRC"/gtk+-$version
	mkdir -p build
	cd build

	ataraxia-meson "$SRC"/gtk+-$version \
		-Dbroadway_backend=true \
		-Dcolord=yes \
		-Dgtk_doc=false \
		-Dman=false
	ninja
	DESTDIR="$PKG" ninja install

	install -Dm0755 "$SRC"/update-icon-cache "$PKG"/usr/bin/update-icon-cache

	for a in gtk3 icon-cache; do
		install -Dm0644 "$SRC"/$a.trigger "$PKG"/var/lib/neko-triggers/$a
	done
}
